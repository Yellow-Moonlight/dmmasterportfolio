<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Seongjoo Moon Portfolio for HfK Bremen DM Master apply</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Seongjoo Moon 문성주" />
    <meta name="keywords" content="Seongjoo Moon, Artist" />

    <link rel="stylesheet" href="../assets/style.css">
</head>

<body>
    <header class="site-header">
        <h1><a href="../index.html" id="top">Seongjoo Moon</a></h1>
    </header>

    <main class="article">
        <article>
            <section class="article" id="content">
                <header class="entry-header">
                    <h1 class="entry-title">
                        Mischief</h1>
                    <p class="summary">
                        Mischief is a series of toy instruments for the kids.
                    </p>
                    <div class="metadata">
                        <div><time class="published">2024-2025</time> </div>
                    </div>
                </header>

                <div class="entry-content">

                    <figure>
                        <div class="container">
                            <iframe class="responsive-iframe"
                                src="https://www.youtube.com/embed/sUJkwCw08is?si=pzyaZ3d7wjOoX1uA"
                                allowfullscreen></iframe>
                        </div>
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>Mischief Performance as a demonstration with a perform set, at Radio
                                        Angrezi, Modular Monday. 16.Feb.2025</em></span>
                            </figcaption>
                        </div>
                    </figure>

                    <p></p>
                    <p>
                        “Mischief” is a series of toy instruments created as part of research for the
                        “sound-playground.”
                        ‘Sound-Playground’ is the playground, that i am going to make one day, where the children’s play
                        generates the sound.
                        <br>
                        <br>
                        Last summer, while walking through a park in Essen, Germany, I witnessed a memorable scene.
                        On the park’s pavement, children had drawn colorful pictures with chalk,
                        and kids from different countries and language backgrounds were playing hopscotch together.
                        Watching them, I realized that play is a powerful universal language that breaks down barriers.
                        <br>
                        <br>
                        However, in a traditional playground, each ride exists independently without interacting with
                        the others.
                        But what if sound could connect them? Imagine if a child's position on a slide determined a note
                        in a melody,
                        or if the carousel's rotation acted as a rhythmic instrument. In this way, sound becomes a
                        bridge, turning
                        isolated rides into a collaborative musical experience. Through this Sound-Playground, I want
                        children
                        to discover the joy of creating something together.
                        <br>
                        <br>
                        For this project, i hacked four existing toys, and designed one instrument.
                        The toy works as a sequencer—when blocks are placed on its panel, it starts playing,
                        and the weight of the blocks determines the notes. The Hammer bank functions as both a
                        sample player and a looper. The rocking horse adds a reverb effect, the RC car generates
                        synthesizer sounds,
                        and the airplane creates bass sounds.
                    </p>
                    <h2 id="Hardware">Hardware and software</h2>
                    <figure>
                        <img src="../assets/images/mischief-1.jpg" alt="mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>entire toys photo</em></span>
                            </figcaption>
                        </div>
                    </figure>

                    <p>
                        Mischief is consisted with 5 toys. 
                        (1) The wooden block play panel, (2) hammer bank, (3) RC car, (4) Rocking horse, (5) Wooden airplane.
                        <br>
                        The first three toys are connected directly to master ESP32 through wire. 
                        And Rocking horse and wooden airplane have each slave ESP32 and they are connected to master ESP32 through bluetooth.
                        <br>
                        Master ESP32 is connected with Laptop and send the each sensor value to Max for Live through serial communication. 
                        With this signal Max for Live control and play the sounds. 
                    </p>

                    <p>
                        Source code for the Master ESP32. 
                   </p>
                   <figure>
                        <div class="colorscripter-code" style="color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#272727;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div><div style="line-height:130%">54</div><div style="line-height:130%">55</div><div style="line-height:130%">56</div><div style="line-height:130%">57</div><div style="line-height:130%">58</div><div style="line-height:130%">59</div><div style="line-height:130%">60</div><div style="line-height:130%">61</div><div style="line-height:130%">62</div><div style="line-height:130%">63</div><div style="line-height:130%">64</div><div style="line-height:130%">65</div><div style="line-height:130%">66</div><div style="line-height:130%">67</div><div style="line-height:130%">68</div><div style="line-height:130%">69</div><div style="line-height:130%">70</div><div style="line-height:130%">71</div><div style="line-height:130%">72</div><div style="line-height:130%">73</div><div style="line-height:130%">74</div><div style="line-height:130%">75</div><div style="line-height:130%">76</div><div style="line-height:130%">77</div><div style="line-height:130%">78</div><div style="line-height:130%">79</div><div style="line-height:130%">80</div><div style="line-height:130%">81</div><div style="line-height:130%">82</div><div style="line-height:130%">83</div><div style="line-height:130%">84</div><div style="line-height:130%">85</div><div style="line-height:130%">86</div><div style="line-height:130%">87</div><div style="line-height:130%">88</div><div style="line-height:130%">89</div><div style="line-height:130%">90</div><div style="line-height:130%">91</div><div style="line-height:130%">92</div><div style="line-height:130%">93</div><div style="line-height:130%">94</div><div style="line-height:130%">95</div><div style="line-height:130%">96</div><div style="line-height:130%">97</div><div style="line-height:130%">98</div><div style="line-height:130%">99</div><div style="line-height:130%">100</div><div style="line-height:130%">101</div><div style="line-height:130%">102</div><div style="line-height:130%">103</div><div style="line-height:130%">104</div><div style="line-height:130%">105</div><div style="line-height:130%">106</div><div style="line-height:130%">107</div><div style="line-height:130%">108</div><div style="line-height:130%">109</div><div style="line-height:130%">110</div><div style="line-height:130%">111</div><div style="line-height:130%">112</div><div style="line-height:130%">113</div><div style="line-height:130%">114</div><div style="line-height:130%">115</div><div style="line-height:130%">116</div><div style="line-height:130%">117</div><div style="line-height:130%">118</div><div style="line-height:130%">119</div><div style="line-height:130%">120</div><div style="line-height:130%">121</div><div style="line-height:130%">122</div><div style="line-height:130%">123</div><div style="line-height:130%">124</div><div style="line-height:130%">125</div><div style="line-height:130%">126</div><div style="line-height:130%">127</div><div style="line-height:130%">128</div><div style="line-height:130%">129</div><div style="line-height:130%">130</div><div style="line-height:130%">131</div><div style="line-height:130%">132</div><div style="line-height:130%">133</div><div style="line-height:130%">134</div><div style="line-height:130%">135</div><div style="line-height:130%">136</div><div style="line-height:130%">137</div><div style="line-height:130%">138</div><div style="line-height:130%">139</div><div style="line-height:130%">140</div><div style="line-height:130%">141</div><div style="line-height:130%">142</div><div style="line-height:130%">143</div><div style="line-height:130%">144</div><div style="line-height:130%">145</div><div style="line-height:130%">146</div><div style="line-height:130%">147</div><div style="line-height:130%">148</div><div style="line-height:130%">149</div><div style="line-height:130%">150</div><div style="line-height:130%">151</div><div style="line-height:130%">152</div><div style="line-height:130%">153</div><div style="line-height:130%">154</div><div style="line-height:130%">155</div><div style="line-height:130%">156</div><div style="line-height:130%">157</div><div style="line-height:130%">158</div><div style="line-height:130%">159</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&lt;</span>BLEDevice.h<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&lt;</span>BLEScan.h<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&lt;</span>BLEUtils.h<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&lt;</span>BLEAdvertisedDevice.h<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&lt;</span>BLEClient.h<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#define</span>&nbsp;SERVICE_UUID&nbsp;<span style="color:#ffd500">"12345678-1234-1234-1234-1234567890ab"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#define</span>&nbsp;CHARACTERISTIC_UUID&nbsp;<span style="color:#ffd500">"abcdefab-1234-5678-9876-abcdefabcdef"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">BLERemoteCharacteristic<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>&nbsp;pRemoteCharacteristic1;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Change&nbsp;type&nbsp;to&nbsp;BLERemoteCharacteristic</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">BLERemoteCharacteristic<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>&nbsp;pRemoteCharacteristic2;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Characteristic&nbsp;of&nbsp;the&nbsp;second&nbsp;transmitting&nbsp;ESP32</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">bool</span>&nbsp;deviceFound1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">false</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Whether&nbsp;the&nbsp;first&nbsp;transmitting&nbsp;ESP32&nbsp;was&nbsp;found</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">bool</span>&nbsp;deviceFound2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">false</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Whether&nbsp;the&nbsp;second&nbsp;transmitting&nbsp;ESP32&nbsp;was&nbsp;found</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">BLEClient<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>&nbsp;pClient1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;nullptr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Client&nbsp;for&nbsp;the&nbsp;first&nbsp;transmitting&nbsp;ESP32</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">BLEClient<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>&nbsp;pClient2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;nullptr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Client&nbsp;for&nbsp;the&nbsp;second&nbsp;transmitting&nbsp;ESP32</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">unsigned</span>&nbsp;<span style="color:#4be6fa">long</span>&nbsp;lastTime&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">unsigned</span>&nbsp;<span style="color:#4be6fa">long</span>&nbsp;currentTime;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;analogPin&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">36</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;S0&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;S1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">4</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;S2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">16</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;hammer1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">12</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;hammer2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">14</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;hammer3&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">27</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;hammer4&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">26</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;hammer5&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">25</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;hammer6&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">33</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;hammer7&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">32</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;hammer8&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">35</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;rc1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">22</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;rc2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">19</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;rc3&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">23</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;rc4&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">18</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">void</span>&nbsp;setup()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;Serial.<span style="color:#4be6fa">begin</span>(<span style="color:#c10aff">115200</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;BLEDevice::init(<span style="color:#ffd500">""</span>);&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Initialize&nbsp;BLE&nbsp;device</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Start&nbsp;BLE&nbsp;scan</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;BLEScan<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>&nbsp;pBLEScan&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;BLEDevice::getScan();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pBLEScan<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>setActiveScan(<span style="color:#ff3399">true</span>);&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Active&nbsp;scan</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pBLEScan<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>start(<span style="color:#c10aff">5</span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Scan&nbsp;for&nbsp;5&nbsp;seconds</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;For&nbsp;the&nbsp;sequencer</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(analogPin,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(S0,&nbsp;OUTPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(S1,&nbsp;OUTPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(S2,&nbsp;OUTPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(hammer1,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(hammer2,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(hammer3,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(hammer4,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(hammer5,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(hammer6,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(hammer7,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(hammer8,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(rc1,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(rc2,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(rc3,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(rc4,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">void</span>&nbsp;loop()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;currentTime&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;millis();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span>deviceFound1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">|</span><span style="color:#aaffaa"></span><span style="color:#ff3399">|</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span>deviceFound2)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Scan&nbsp;and&nbsp;connect&nbsp;to&nbsp;BLE&nbsp;devices</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;BLEScanResults&nbsp;foundDevices&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;BLEDevice::getScan()<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>getResults();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">for</span>&nbsp;(<span style="color:#4be6fa">int</span>&nbsp;i&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>;&nbsp;i&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&lt;</span>&nbsp;foundDevices.getCount();&nbsp;i<span style="color:#aaffaa"></span><span style="color:#ff3399">+</span><span style="color:#aaffaa"></span><span style="color:#ff3399">+</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BLEAdvertisedDevice&nbsp;advertisedDevice&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;foundDevices.getDevice(i);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;deviceName&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;String(advertisedDevice.getName().c_str());&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Convert&nbsp;std::string&nbsp;to&nbsp;String</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Find&nbsp;the&nbsp;first&nbsp;transmitting&nbsp;ESP32</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(deviceName&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">"ESP32_Sensor_1"</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span>deviceFound1)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(<span style="color:#ffd500">"Found&nbsp;ESP32_Sensor_1"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pClient1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;BLEDevice::createClient();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BLEAddress&nbsp;addr1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;advertisedDevice.getAddress();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(pClient1<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>connect(addr1))&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(<span style="color:#ffd500">"Connected&nbsp;to&nbsp;ESP32_Sensor_1"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BLERemoteService<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>&nbsp;pService1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;pClient1<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>getService(SERVICE_UUID);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(pService1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;nullptr)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pRemoteCharacteristic1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;pService1<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>getCharacteristic(CHARACTERISTIC_UUID);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(pRemoteCharacteristic1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;nullptr)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deviceFound1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">true</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Find&nbsp;the&nbsp;second&nbsp;transmitting&nbsp;ESP32</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(deviceName&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ffd500">"ESP32_Sensor_2"</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span>deviceFound2)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(<span style="color:#ffd500">"Found&nbsp;ESP32_Sensor_2"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pClient2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;BLEDevice::createClient();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BLEAddress&nbsp;addr2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;advertisedDevice.getAddress();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(pClient2<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>connect(addr2))&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(<span style="color:#ffd500">"Connected&nbsp;to&nbsp;ESP32_Sensor_2"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BLERemoteService<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>&nbsp;pService2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;pClient2<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>getService(SERVICE_UUID);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(pService2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;nullptr)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pRemoteCharacteristic2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;pService2<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>getCharacteristic(CHARACTERISTIC_UUID);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(pRemoteCharacteristic2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;nullptr)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deviceFound2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">true</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Periodically&nbsp;read&nbsp;data</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(deviceFound1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>&nbsp;deviceFound2)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Read&nbsp;data&nbsp;from&nbsp;the&nbsp;first&nbsp;transmitting&nbsp;ESP32</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(pRemoteCharacteristic1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;nullptr)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#4be6fa">std</span>::<span style="color:#4be6fa">string</span>&nbsp;value1&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;pRemoteCharacteristic1<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>readValue();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(String(value1.c_str()));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Read&nbsp;data&nbsp;from&nbsp;the&nbsp;second&nbsp;transmitting&nbsp;ESP32</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(pRemoteCharacteristic2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;nullptr)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#4be6fa">std</span>::<span style="color:#4be6fa">string</span>&nbsp;value2&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;pRemoteCharacteristic2<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>readValue();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(String(value2.c_str()));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">for</span>&nbsp;(<span style="color:#4be6fa">int</span>&nbsp;i&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>;&nbsp;i&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&lt;</span>&nbsp;<span style="color:#c10aff">8</span>;&nbsp;i<span style="color:#aaffaa"></span><span style="color:#ff3399">+</span><span style="color:#aaffaa"></span><span style="color:#ff3399">+</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Set&nbsp;values&nbsp;to&nbsp;selection&nbsp;pins</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;digitalWrite(S0,&nbsp;(i&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>&nbsp;<span style="color:#c10aff">0x01</span>));&nbsp;&nbsp;<span style="color:#999999">//&nbsp;LSB</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;digitalWrite(S1,&nbsp;(i&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>&nbsp;<span style="color:#c10aff">0x02</span>)&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#c10aff">1</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;digitalWrite(S2,&nbsp;(i&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>&nbsp;<span style="color:#c10aff">0x04</span>)&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>&nbsp;<span style="color:#c10aff">2</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Read&nbsp;analog&nbsp;value&nbsp;from&nbsp;selected&nbsp;channel</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#4be6fa">int</span>&nbsp;sensorValue&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;analogRead(analogPin);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(sensorValue);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(digitalRead(hammer1));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(digitalRead(hammer2));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(digitalRead(hammer3));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(digitalRead(hammer4));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(digitalRead(hammer5));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(digitalRead(hammer6));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(digitalRead(hammer7));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(digitalRead(hammer8));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span>digitalRead(rc1));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span>digitalRead(rc2));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span>digitalRead(rc3));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span>digitalRead(rc4));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(<span style="color:#ffd500">"&nbsp;"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.println();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;delay(<span style="color:#c10aff">10</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>
                  </figure>


                    <h2>The wooden block paly panel</h2>
                    <p>The wooden block play panel was designed and built to function as a 8 step sequencer.
                        Wooden blocks from existing toys were used. A Force Sensing Resistor was employed to measure
                        pressure,
                        and a shift register (CD4051BE) was utilized to reduce the number of pins needed for the
                        microcontroller.</p>
                        
                    <figure>
                        <img src="../assets/images/mischief-3.jpg" alt="mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>wooden block play panel</em></span>
                            </figcaption>
                        </div>

                        <img src = "../assets/images/mischief-4.jpeg" alt = "mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>sketch</em></span>
                            </figcaption>
                        </div>
                        
                        <img src = "../assets/images/mischief-5-circuit.png" alt = "mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>circuit sketch. ESP32(Lolin32) was used instead of Arduino</em></span>
                            </figcaption>
                        </div>
                    </figure>

                    <h2>The Hammer Bank</h2>
                    <p>The Hammer Bank has been modified to operate by installing a tact switch under the wooden pillar. It worked as Sample player and looper.</p>
                    <div class="article-img vertical">
                    <figure>
                        <img src="../assets/images/mischief-6-hammerbank.jpg" alt="mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>the hammer bank</em></span>
                            </figcaption>
                        </div>

                        <figure>
                        <img src = "../assets/images/mischief-7-sketch.png" alt = "mischief image">
                        </figure>
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>sketch. Originally I would like to make it as melodie instrument with 555 timer. </em></span>
                            </figcaption>
                        </div>
                    </div>
                    <figure>
                        <img src="../assets/images/mischief-7-circuit.png" alt="mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>circuit sketch</em></span>
                            </figcaption>
                        </div>
                    </figure>

                    <h2>The RC Car</h2>
                    <p>The RC car analyzed the signals from the controller's IC chip and sent them through a comparator when the buttons were triggered, 
                        then transmitted them to the microcontroller for use.
                    </p>
                    <div class="article-img vertical">
                    <figure>
                        <img src="../assets/images/mischief-8.jpg" alt="mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>the RC car</em></span>
                            </figcaption>
                        </div>

                        <img src = "../assets/images/mischief-9.png" alt = "mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>sketch</em></span>
                            </figcaption>
                        </div>
                    </div>
                    <figure>

                        <img src="../assets/images/mischief-9-circuit.png" alt="mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>circuit sketch</em></span>
                            </figcaption>
                        </div>
                    </figure>

                    <h2>The rocking horse and Airplane toy</h2>
                    <p>The rocking horse and airplane toy used a gyroscope sensor (MPU 6050) and transmitted the data to the main microcontroller (Master ESP32) via Bluetooth from the slave ESP32.
                    </p>

                    <figure>
                        <img src="../assets/images/mischief-10.jpg" alt="mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>the rocking horse</em></span>
                            </figcaption>
                        </div>

                        <img src = "../assets/images/mishchief-11.jpg" alt = "mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>airtplane toy</em></span>
                            </figcaption>
                        </div>

                        <figure data-imgstate="small">
                        <img src="../assets/images/mischief-12.png" alt="mischief image">
                    </figure>
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>circuit sketch</em></span>
                            </figcaption>
                        </div>
                        
                    </figure>
                    
                    <p>source code for the slave ESP32 of the rocking horse. Almost smae code is used for the airplane toy, but there is some change at the send vaiable.</p>
                    <figure>
                        <div class="colorscripter-code" style="color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#272727;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div><div style="line-height:130%">54</div><div style="line-height:130%">55</div><div style="line-height:130%">56</div><div style="line-height:130%">57</div><div style="line-height:130%">58</div><div style="line-height:130%">59</div><div style="line-height:130%">60</div><div style="line-height:130%">61</div><div style="line-height:130%">62</div><div style="line-height:130%">63</div><div style="line-height:130%">64</div><div style="line-height:130%">65</div><div style="line-height:130%">66</div><div style="line-height:130%">67</div><div style="line-height:130%">68</div><div style="line-height:130%">69</div><div style="line-height:130%">70</div><div style="line-height:130%">71</div><div style="line-height:130%">72</div><div style="line-height:130%">73</div><div style="line-height:130%">74</div><div style="line-height:130%">75</div><div style="line-height:130%">76</div><div style="line-height:130%">77</div><div style="line-height:130%">78</div><div style="line-height:130%">79</div><div style="line-height:130%">80</div><div style="line-height:130%">81</div><div style="line-height:130%">82</div><div style="line-height:130%">83</div><div style="line-height:130%">84</div><div style="line-height:130%">85</div><div style="line-height:130%">86</div><div style="line-height:130%">87</div><div style="line-height:130%">88</div><div style="line-height:130%">89</div><div style="line-height:130%">90</div><div style="line-height:130%">91</div><div style="line-height:130%">92</div><div style="line-height:130%">93</div><div style="line-height:130%">94</div><div style="line-height:130%">95</div><div style="line-height:130%">96</div><div style="line-height:130%">97</div><div style="line-height:130%">98</div><div style="line-height:130%">99</div><div style="line-height:130%">100</div><div style="line-height:130%">101</div><div style="line-height:130%">102</div><div style="line-height:130%">103</div><div style="line-height:130%">104</div><div style="line-height:130%">105</div><div style="line-height:130%">106</div><div style="line-height:130%">107</div><div style="line-height:130%">108</div><div style="line-height:130%">109</div><div style="line-height:130%">110</div><div style="line-height:130%">111</div><div style="line-height:130%">112</div><div style="line-height:130%">113</div><div style="line-height:130%">114</div><div style="line-height:130%">115</div><div style="line-height:130%">116</div><div style="line-height:130%">117</div><div style="line-height:130%">118</div><div style="line-height:130%">119</div><div style="line-height:130%">120</div><div style="line-height:130%">121</div><div style="line-height:130%">122</div><div style="line-height:130%">123</div><div style="line-height:130%">124</div><div style="line-height:130%">125</div><div style="line-height:130%">126</div><div style="line-height:130%">127</div><div style="line-height:130%">128</div><div style="line-height:130%">129</div><div style="line-height:130%">130</div><div style="line-height:130%">131</div><div style="line-height:130%">132</div><div style="line-height:130%">133</div><div style="line-height:130%">134</div><div style="line-height:130%">135</div><div style="line-height:130%">136</div><div style="line-height:130%">137</div><div style="line-height:130%">138</div><div style="line-height:130%">139</div><div style="line-height:130%">140</div><div style="line-height:130%">141</div><div style="line-height:130%">142</div><div style="line-height:130%">143</div><div style="line-height:130%">144</div><div style="line-height:130%">145</div><div style="line-height:130%">146</div><div style="line-height:130%">147</div><div style="line-height:130%">148</div><div style="line-height:130%">149</div><div style="line-height:130%">150</div><div style="line-height:130%">151</div><div style="line-height:130%">152</div><div style="line-height:130%">153</div><div style="line-height:130%">154</div><div style="line-height:130%">155</div><div style="line-height:130%">156</div><div style="line-height:130%">157</div><div style="line-height:130%">158</div><div style="line-height:130%">159</div><div style="line-height:130%">160</div><div style="line-height:130%">161</div><div style="line-height:130%">162</div><div style="line-height:130%">163</div><div style="line-height:130%">164</div><div style="line-height:130%">165</div><div style="line-height:130%">166</div><div style="line-height:130%">167</div><div style="line-height:130%">168</div><div style="line-height:130%">169</div><div style="line-height:130%">170</div><div style="line-height:130%">171</div><div style="line-height:130%">172</div><div style="line-height:130%">173</div><div style="line-height:130%">174</div><div style="line-height:130%">175</div><div style="line-height:130%">176</div><div style="line-height:130%">177</div><div style="line-height:130%">178</div><div style="line-height:130%">179</div><div style="line-height:130%">180</div><div style="line-height:130%">181</div><div style="line-height:130%">182</div><div style="line-height:130%">183</div><div style="line-height:130%">184</div><div style="line-height:130%">185</div><div style="line-height:130%">186</div><div style="line-height:130%">187</div><div style="line-height:130%">188</div><div style="line-height:130%">189</div><div style="line-height:130%">190</div><div style="line-height:130%">191</div><div style="line-height:130%">192</div><div style="line-height:130%">193</div><div style="line-height:130%">194</div><div style="line-height:130%">195</div><div style="line-height:130%">196</div><div style="line-height:130%">197</div><div style="line-height:130%">198</div><div style="line-height:130%">199</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#ffd500">"I2Cdev.h"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#ffd500">"MPU6050_6Axis_MotionApps20.h"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//#include&nbsp;"MPU6050.h"&nbsp;//&nbsp;not&nbsp;necessary&nbsp;if&nbsp;using&nbsp;MotionApps&nbsp;include&nbsp;file</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&lt;</span>BLEDevice.h<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&lt;</span>BLEServer.h<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&lt;</span>BLEUtils.h<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&lt;</span>BLE2902.h<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;Set&nbsp;BLE&nbsp;service&nbsp;and&nbsp;characteristic&nbsp;UUIDs</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#define</span>&nbsp;SERVICE_UUID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ffd500">"12345678-1234-1234-1234-1234567890ab"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#define</span>&nbsp;CHARACTERISTIC_UUID&nbsp;<span style="color:#ffd500">"abcdefab-1234-5678-9876-abcdefabcdef"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">BLECharacteristic&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>pCharacteristic;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Characteristic&nbsp;object</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#if</span>&nbsp;I2CDEV_IMPLEMENTATION&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;I2CDEV_ARDUINO_WIRE</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#include</span>&nbsp;<span style="color:#ffd500">"Wire.h"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#endif</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#define</span>&nbsp;OUTPUT_READABLE_REALACCEL</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">MPU6050&nbsp;mpu;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">unsigned</span>&nbsp;<span style="color:#4be6fa">long</span>&nbsp;t&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">int</span>&nbsp;val;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#define</span>&nbsp;INTERRUPT_PIN&nbsp;<span style="color:#c10aff">2</span>&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Use&nbsp;pin&nbsp;2&nbsp;on&nbsp;Arduino&nbsp;Uno&nbsp;&amp;&nbsp;most&nbsp;boards</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#define</span>&nbsp;LED_PIN&nbsp;<span style="color:#c10aff">32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;(Arduino&nbsp;is&nbsp;13,&nbsp;Teensy&nbsp;is&nbsp;11,&nbsp;Teensy++&nbsp;is&nbsp;6)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">bool</span>&nbsp;blinkState&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">false</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;MPU&nbsp;control/status&nbsp;vars</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">bool</span>&nbsp;dmpReady&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">false</span>;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Set&nbsp;true&nbsp;if&nbsp;DMP&nbsp;init&nbsp;was&nbsp;successful</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">uint8_t&nbsp;mpuIntStatus;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Holds&nbsp;actual&nbsp;interrupt&nbsp;status&nbsp;byte&nbsp;from&nbsp;MPU</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">uint8_t&nbsp;devStatus;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Return&nbsp;status&nbsp;after&nbsp;each&nbsp;device&nbsp;operation&nbsp;(0&nbsp;=&nbsp;success,&nbsp;!0&nbsp;=&nbsp;error)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">uint16_t&nbsp;packetSize;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Expected&nbsp;DMP&nbsp;packet&nbsp;size&nbsp;(default&nbsp;is&nbsp;42&nbsp;bytes)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">uint16_t&nbsp;fifoCount;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Count&nbsp;of&nbsp;all&nbsp;bytes&nbsp;currently&nbsp;in&nbsp;FIFO</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">uint8_t&nbsp;fifoBuffer[<span style="color:#c10aff">64</span>];&nbsp;&nbsp;<span style="color:#999999">//&nbsp;FIFO&nbsp;storage&nbsp;buffer</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;Orientation/motion&nbsp;vars</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">Quaternion&nbsp;q;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;[w,&nbsp;x,&nbsp;y,&nbsp;z]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quaternion&nbsp;container</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">VectorInt16&nbsp;aa;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;[x,&nbsp;y,&nbsp;z]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Accel&nbsp;sensor&nbsp;measurements</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">VectorInt16&nbsp;aaReal;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;[x,&nbsp;y,&nbsp;z]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gravity-free&nbsp;accel&nbsp;sensor&nbsp;measurements</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">VectorInt16&nbsp;aaWorld;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;[x,&nbsp;y,&nbsp;z]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;World-frame&nbsp;accel&nbsp;sensor&nbsp;measurements</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">VectorFloat&nbsp;gravity;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;[x,&nbsp;y,&nbsp;z]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gravity&nbsp;vector</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">float</span>&nbsp;euler[<span style="color:#c10aff">3</span>];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;[psi,&nbsp;theta,&nbsp;phi]&nbsp;&nbsp;&nbsp;&nbsp;Euler&nbsp;angle&nbsp;container</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#4be6fa">float</span>&nbsp;ypr[<span style="color:#c10aff">3</span>];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;[yaw,&nbsp;pitch,&nbsp;roll]&nbsp;&nbsp;&nbsp;Yaw/pitch/roll&nbsp;container&nbsp;and&nbsp;gravity&nbsp;vector</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;================================================================</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;===&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INTERRUPT&nbsp;DETECTION&nbsp;ROUTINE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;===</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;================================================================</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">volatile</span>&nbsp;<span style="color:#4be6fa">bool</span>&nbsp;mpuInterrupt&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">false</span>;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Indicates&nbsp;whether&nbsp;MPU&nbsp;interrupt&nbsp;pin&nbsp;has&nbsp;gone&nbsp;high</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">void</span>&nbsp;dmpDataReady()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;mpuInterrupt&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">true</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;================================================================</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;===&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INITIAL&nbsp;SETUP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;===</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;================================================================</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">void</span>&nbsp;setup()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Join&nbsp;I2C&nbsp;bus&nbsp;(I2Cdev&nbsp;library&nbsp;doesn't&nbsp;do&nbsp;this&nbsp;automatically)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#if</span>&nbsp;I2CDEV_IMPLEMENTATION&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;I2CDEV_ARDUINO_WIRE</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;Wire.<span style="color:#4be6fa">begin</span>();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;Wire.setClock(<span style="color:#c10aff">400000</span>);&nbsp;&nbsp;<span style="color:#999999">//&nbsp;400kHz&nbsp;I2C&nbsp;clock.&nbsp;Comment&nbsp;this&nbsp;line&nbsp;if&nbsp;having&nbsp;compilation&nbsp;difficulties</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#elif</span>&nbsp;I2CDEV_IMPLEMENTATION&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;I2CDEV_BUILTIN_FASTWIRE</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;Fastwire::setup(<span style="color:#c10aff">400</span>,&nbsp;<span style="color:#ff3399">true</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#0086b3">#endif</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Initialize&nbsp;serial&nbsp;communication</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;Serial.<span style="color:#4be6fa">begin</span>(<span style="color:#c10aff">115200</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;while&nbsp;(!Serial);&nbsp;//&nbsp;wait&nbsp;for&nbsp;Leonardo&nbsp;enumeration,&nbsp;others&nbsp;continue&nbsp;immediately</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;Serial.println(F(<span style="color:#ffd500">"Initializing&nbsp;I2C&nbsp;devices..."</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;mpu.initialize();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(INTERRUPT_PIN,&nbsp;INPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Verify&nbsp;connection</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;Serial.println(F(<span style="color:#ffd500">"Testing&nbsp;device&nbsp;connections..."</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;Serial.println(mpu.testConnection()&nbsp;?&nbsp;F(<span style="color:#ffd500">"MPU6050&nbsp;connection&nbsp;successful"</span>)&nbsp;:&nbsp;F(<span style="color:#ffd500">"MPU6050&nbsp;connection&nbsp;failed"</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Load&nbsp;and&nbsp;configure&nbsp;the&nbsp;DMP</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;Serial.println(F(<span style="color:#ffd500">"Initializing&nbsp;DMP..."</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;devStatus&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;mpu.dmpInitialize();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Supply&nbsp;your&nbsp;own&nbsp;gyro&nbsp;offsets&nbsp;here,&nbsp;scaled&nbsp;for&nbsp;min&nbsp;sensitivity</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;mpu.setXGyroOffset(<span style="color:#c10aff">158</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;mpu.setYGyroOffset(<span style="color:#c10aff">4</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;mpu.setZGyroOffset(<span style="color:#c10aff">56</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;mpu.setXAccelOffset(<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">2818</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;mpu.setYAccelOffset(<span style="color:#c10aff">244</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;mpu.setZAccelOffset(<span style="color:#c10aff">1055</span>);&nbsp;&nbsp;<span style="color:#999999">//&nbsp;1688&nbsp;factory&nbsp;default&nbsp;for&nbsp;my&nbsp;test&nbsp;chip</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(devStatus&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Calibration&nbsp;Time:&nbsp;generate&nbsp;offsets&nbsp;and&nbsp;calibrate&nbsp;our&nbsp;MPU6050</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//mpu.CalibrateAccel(6);</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//mpu.CalibrateGyro(6);</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//mpu.PrintActiveOffsets();</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Turn&nbsp;on&nbsp;the&nbsp;DMP,&nbsp;now&nbsp;that&nbsp;it's&nbsp;ready</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(F(<span style="color:#ffd500">"Enabling&nbsp;DMP..."</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;mpu.setDMPEnabled(<span style="color:#ff3399">true</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Enable&nbsp;Arduino&nbsp;interrupt&nbsp;detection</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(F(<span style="color:#ffd500">"Enabling&nbsp;interrupt&nbsp;detection&nbsp;(Arduino&nbsp;external&nbsp;interrupt&nbsp;"</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(digitalPinToInterrupt(INTERRUPT_PIN));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(F(<span style="color:#ffd500">")..."</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;attachInterrupt(digitalPinToInterrupt(INTERRUPT_PIN),&nbsp;dmpDataReady,&nbsp;RISING);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;mpuIntStatus&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;mpu.getIntStatus();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Set&nbsp;our&nbsp;DMP&nbsp;Ready&nbsp;flag&nbsp;so&nbsp;the&nbsp;main&nbsp;loop()&nbsp;function&nbsp;knows&nbsp;it's&nbsp;okay&nbsp;to&nbsp;use&nbsp;it</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(F(<span style="color:#ffd500">"DMP&nbsp;ready!&nbsp;Waiting&nbsp;for&nbsp;first&nbsp;interrupt..."</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;dmpReady&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">true</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Get&nbsp;expected&nbsp;DMP&nbsp;packet&nbsp;size&nbsp;for&nbsp;later&nbsp;comparison</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;packetSize&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;mpu.dmpGetFIFOPacketSize();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}&nbsp;<span style="color:#ff3399">else</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;ERROR!</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;1&nbsp;=&nbsp;initial&nbsp;memory&nbsp;load&nbsp;failed</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;2&nbsp;=&nbsp;DMP&nbsp;configuration&nbsp;updates&nbsp;failed</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;(if&nbsp;it's&nbsp;going&nbsp;to&nbsp;break,&nbsp;usually&nbsp;the&nbsp;code&nbsp;will&nbsp;be&nbsp;1)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(F(<span style="color:#ffd500">"DMP&nbsp;Initialization&nbsp;failed&nbsp;(code&nbsp;"</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(devStatus);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(F(<span style="color:#ffd500">")"</span>));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Configure&nbsp;LED&nbsp;for&nbsp;output</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pinMode(LED_PIN,&nbsp;OUTPUT);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;BLEDevice::init(<span style="color:#ffd500">"ESP32_Sensor_1"</span>);&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Initialize&nbsp;BLE&nbsp;device</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Create&nbsp;BLE&nbsp;server</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;BLEServer&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>pServer&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;BLEDevice::createServer();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Create&nbsp;BLE&nbsp;service</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;BLEService&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>pService&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;pServer<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>createService(SERVICE_UUID);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Create&nbsp;characteristic&nbsp;(readable&nbsp;and&nbsp;notifiable)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pCharacteristic&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;pService<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>createCharacteristic(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CHARACTERISTIC_UUID,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BLECharacteristic::PROPERTY_READ&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">|</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BLECharacteristic::PROPERTY_NOTIFY</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Set&nbsp;initial&nbsp;value&nbsp;for&nbsp;the&nbsp;characteristic</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pCharacteristic<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>setValue(<span style="color:#ffd500">"Initial&nbsp;data"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Enable&nbsp;notifications&nbsp;for&nbsp;the&nbsp;characteristic</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pCharacteristic<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>addDescriptor(<span style="color:#ff3399">new</span>&nbsp;BLE2902());</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Start&nbsp;the&nbsp;service</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pService<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>start();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Start&nbsp;BLE&nbsp;advertising&nbsp;so&nbsp;other&nbsp;devices&nbsp;can&nbsp;discover&nbsp;this&nbsp;one</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;BLEAdvertising&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>pAdvertising&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;pServer<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>getAdvertising();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;pAdvertising<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>start();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;Serial.println(<span style="color:#ffd500">"Waiting&nbsp;for&nbsp;a&nbsp;client&nbsp;to&nbsp;connect..."</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">void</span>&nbsp;loop()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;If&nbsp;programming&nbsp;failed,&nbsp;don't&nbsp;try&nbsp;to&nbsp;do&nbsp;anything</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span>dmpReady)&nbsp;<span style="color:#ff3399">return</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(mpu.dmpGetCurrentFIFOPacket(fifoBuffer))&nbsp;{&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Get&nbsp;the&nbsp;latest&nbsp;packet</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;mpu.dmpGetQuaternion(<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>q,&nbsp;fifoBuffer);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;mpu.dmpGetAccel(<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>aa,&nbsp;fifoBuffer);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;mpu.dmpGetGravity(<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>gravity,&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>q);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;mpu.dmpGetLinearAccel(<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>aaReal,&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>aa,&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>gravity);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;mpu.dmpGetLinearAccelInWorld(<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>aaWorld,&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>aaReal,&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>q);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;mpu.dmpGetYawPitchRoll(ypr,&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>q,&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&amp;</span>gravity);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;ypr[<span style="color:#c10aff">1</span>]&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">*</span>&nbsp;<span style="color:#c10aff">180</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">/</span>&nbsp;M_PI;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;blinkState&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">!</span>blinkState;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;digitalWrite(LED_PIN,&nbsp;blinkState);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#4be6fa">int</span>&nbsp;absval&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#4be6fa">int</span>(abs(val));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">static</span>&nbsp;<span style="color:#ff3399">unsigned</span>&nbsp;<span style="color:#4be6fa">long</span>&nbsp;lastTime&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">unsigned</span>&nbsp;<span style="color:#4be6fa">long</span>&nbsp;currentTime&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;millis();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Send&nbsp;data&nbsp;every&nbsp;20&nbsp;milliseconds</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(currentTime&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span>&nbsp;lastTime&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span><span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">20</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;lastTime&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;currentTime;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Set&nbsp;the&nbsp;value&nbsp;to&nbsp;send&nbsp;as&nbsp;the&nbsp;characteristic&nbsp;value</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;dataToSend&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">=</span>&nbsp;String(absval);&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Example&nbsp;data</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;pCharacteristic<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>setValue(dataToSend.c_str());</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Send&nbsp;data</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;pCharacteristic<span style="color:#aaffaa"></span><span style="color:#ff3399">-</span><span style="color:#aaffaa"></span><span style="color:#ff3399">&gt;</span>notify();&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Notify&nbsp;connected&nbsp;client</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(<span style="color:#ffd500">"Sent&nbsp;data:&nbsp;"</span>&nbsp;<span style="color:#aaffaa"></span><span style="color:#ff3399">+</span>&nbsp;dataToSend);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>
                    </figure>

                    <figure>
                        <img src="../assets/images/mischief-14-device.png" alt="mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>main max/msp device present view. It recieves the sensor data from master ESP32 and map this value to other ableton value.</em></span>
                            </figcaption>
                        </div>


                        <img src="../assets/images/mischief-13-maxmainpatch.png" alt="mischief image">
                        <div class="figure-controls">
                            <figcaption class="caption">
                                <span><em>main max/msp patch. You can download whole code include other max for live device at <a href="https://github.com/Yellow-Moonlight/Mischief/tree/main">https://github.com/Yellow-Moonlight/Mischief/tree/main</a></em></span>
                            </figcaption>
                        </div>  
                    </figure>
                </div>
            </section>  
        </article>
    </main>
</body>


<footer>
    Copyright. Seongjoo Moon Portfolio for HfK Bremen DM Master apply.
</footer>